<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Page title -->
    <title>Icon Selector</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>

    <div id="app">
        <ul class="nav nav-tabs" id="categorySelect" role="tablist">
            <li class="nav-item" role="presentation" v-for="(category, index) in categoryData" :key="category.name"
                :id="`tab-${category.name}`" >
                <button class="btn btn-sm"
                    :class="index == currentCategory ? 'btn-primary' : 'btn-outline-primary'" @click="currentCategory = index">
                    {{category.name}}
                </button>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" v-for="(category, index) in categoryData" :key="category.name"
            :id="`pane-${category.name}`" role="tabpanel" :aria-labelledby="`tab-${category.name}`" v-show="currentCategory == index">
                {{category.icons}}
            </div>
        </div>
    </div>
    <!-- Browser support polyfills -->
    <script
        src="https://polyfill.io/v3/polyfill.min.js?features=Array.from,Promise,Symbol,Object.setPrototypeOf,Object.getOwnPropertySymbols,Set,Math.trunc"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <!-- Load Vue (dev version) -->
    <script src="https://unpkg.com/vue@3.1.5"></script>
    <!-- SuperAgent - for fetching -->
    <script src="https://cdn.jsdelivr.net/npm/superagent"></script>
    <!-- Begin setting up Vue -->
    <script>
        const { ref } = Vue;
        const IconSelector = {
            setup() {
                // These will hold the information about what icons we have
                const currentCategory = ref(0);
                const categoryData = ref([]);

                // This Async function begins the process of fetching data to fill things out
                (async () => {
                    // Get the list of categories (and locations to fetch from)
                    const categories = await superagent.get('categoryList.json');
                    // From each category, grab the list of icons and add it to the categoryData object
                    for (const category of categories.body) {
                        superagent.get(category.url).then(res => {
                            categoryData.value.push({
                                name: category.name,
                                icons: res.body.icons
                            });
                        })
                    }
                })();

                return {
                    currentCategory,
                    categoryData
                }
            }
        }
        Vue.createApp(IconSelector).mount('#app')
    </script>
</body>

</html>